# Plan: Finance Morning Brief Playground Task

## Goal
Add a fourth playground task: **Finance Morning Brief Generator** that pulls from multiple data sources and synthesizes a personalized trading brief for a predefined watchlist.

Inspired by Molly Cantillon's ["Personal Panopticon"](https://x.com/mollycantillon/status/2008918474006122936) workflow.

## Watchlist (predefined)
- **Tesla (TSLA)** - stock
- **Sandisk (WDC)** - stock (acquired by Western Digital)
- **Solana (SOL)** - cryptocurrency

## Data Sources

| Source | Data Type | Method |
|--------|-----------|--------|
| Yahoo Finance | Price, volume, % change, technicals | Free API/scrape |
| SEC Edgar | Insider trades (Form 4), 10-K/Q | Free API |
| Capitol Trades | Congressional stock trades | Web scrape via grounding |
| CoinGecko | Crypto price, market cap | Free API |
| FRED (St. Louis Fed) | Macro indicators (VIX, 10Y, DXY, Fed funds) | Free API |
| Solscan / Solana FM | Whale wallet movements | Free API |
| Reddit / Twitter | Social sentiment | Grounding search |
| Gemini grounding | News, sentiment, analysis | `googleSearch`, `urlContext` |

## Brief Structure (verification target)

**Philosophy:** LLM analyzes ALL data sources, but brief only surfaces actionable signals. No alerts = minimal output.

```markdown
# Morning Brief - {date}

## Macro
VIX {XX.X} | 10Y {X.XX%} | DXY {XXX} | Fed {X.XX%} â†’ FOMC {date}

## Alerts
[Only items that cross thresholds - omit section if none]

ðŸ”´ TSLA -5.2% | RSI 28 (oversold) | Approaching $200 support
ðŸŸ¡ SOL whale accumulation: 3 wallets added $4.2M in 24h
ðŸ”´ WDC insider sale: CFO sold $850k on 1/15

## Watchlist

**TSLA** $245.30 (+1.2%) Â· RSI 52 Â· No alerts
**WDC** $48.20 (-0.3%) Â· RSI 61 Â· See alert above
**SOL** $142.50 (+3.8%) Â· RSI 58 Â· See alert above

---
Generated by SkillForge agent
```

### Alert Thresholds (trigger inclusion)
- Price move > 3% (either direction)
- RSI > 70 (overbought) or < 30 (oversold)
- Price within 5% of key support/resistance
- Any insider trade > $100k
- Any congressional trade
- Whale movement > $1M (crypto)
- Breaking news (material events only)
- Sentiment extreme (viral Reddit/Twitter)

## Verification Criteria

### Structure
- [ ] Macro line present with all 4 indicators
- [ ] Watchlist section with all 3 tickers (price + RSI minimum)
- [ ] Alerts section present (even if empty / "No alerts")

### Data Quality
- [ ] Prices are real and recent (within 24 hours)
- [ ] RSI values between 0-100
- [ ] Alerts correctly triggered (if price >3%, must appear in Alerts)

### Analysis Completeness (LLM must check, even if not in output)
- [ ] Insider activity checked for both stocks
- [ ] Congressional trades checked for both stocks
- [ ] Whale wallets checked for SOL (exchange addresses excluded)
- [ ] Social sentiment scanned for all 3 tickers
- [ ] News checked for all 3 tickers

## Skill Encoding (Procedural + Preferences)

**Procedural knowledge:**
- SEC Edgar API format for Form 4 filings
- Yahoo Finance query format (price + technicals)
- CoinGecko API for crypto
- Date range handling
- FRED series IDs: VIXCLS (VIX), DGS10 (10Y yield), DTWEXBGS (DXY), DFF (Fed funds)
- RSI calculation: use 14-period, adjusted close prices
- Correlation calculation: align timestamps (market hours for stocks, 24/7 for crypto)
- Solana whale wallet exclusion list (known exchange addresses)
- Social sentiment search patterns that distinguish ticker from company name

**Preference encoding:**
```markdown
## Watchlist
- TSLA, WDC, SOL

## Notable Thresholds
- Price move > 3% = highlight
- Insider trade > $100k = highlight
- Congressional trade = always highlight

## Brief Format
- Lead with biggest movers
- Max 3 news items per ticker
- Include contrarian takes if available
```

## Demo Flow

### Phase 1: Initial Vague Prompt (task file)

```markdown
---
name: finance-morning-brief
description: Generate a morning trading brief from multiple data sources
---

Give me a morning trading brief for my watchlist: TSLA, WDC, SOL.
```

**Expected Run 1 Output (underwhelming):**
```
# Morning Brief

## TSLA (Tesla)
Price: $248.30 (+1.2%)
News: Tesla announces new factory plans...

## WDC (Western Digital)
Price: $47.90 (-0.2%)
News: Western Digital reports Q4 earnings...

## SOL (Solana)
Price: $138.20 (+1.1%)
News: Solana ecosystem grows...
```

**What's missing:** No RSI, no insider trades, no congressional activity, no whale tracking, no macro context, no alert thresholds.

---

### Phase 2: User Refinement (in-chat follow-up)

User says:
> "That's too basic. I need you to also check:
> - RSI and key technical levels
> - Insider trades from SEC Form 4 (for stocks)
> - Congressional trading activity (for stocks)
> - Whale wallet movements (for SOL)
> - Social sentiment from Reddit/Twitter
> - Macro context: VIX, 10Y yield, DXY, Fed funds
>
> Only surface alerts when thresholds are crossed (>3% move, RSI extreme, insider >$100k, any congressional trade, whale >$1M). Keep the output short."

**Expected Run 2 Output (success):**
```
# Morning Brief - 2026-01-17

## Macro
VIX 18.2 | 10Y 4.52% | DXY 103.8 | Fed 5.25% â†’ FOMC 1/29

## Alerts
ðŸ”´ WDC insider sale: CFO sold $320k on 1/14
ðŸŸ¡ SOL whale accumulation: 2 wallets added $2.1M in 24h

## Watchlist
**TSLA** $248.30 (+1.2%) Â· RSI 52 Â· No alerts
**WDC** $47.90 (-0.2%) Â· RSI 58 Â· See alert above
**SOL** $138.20 (+1.1%) Â· RSI 49 Â· See alert above
```

**Run 2 also encounters procedural gotchas** (FRED series IDs, whale wallet exclusions, etc.)

---

### Phase 3: Codify

Skill captures BOTH:

**Preferences (what to check):**
- Macro context required
- Technical levels (RSI-14, support/resistance)
- Insider trades for stocks
- Congressional trades for stocks
- Whale wallets for crypto
- Alert thresholds: >3% price, RSI >70/<30, insider >$100k, any congressional, whale >$1M

**Procedural (how to check):**
- FRED series IDs: VIXCLS, DGS10, DTWEXBGS, DFF
- SEC Edgar Form 4 query format
- Solana whale wallet exclusion list
- Sentiment search patterns: "$TSLA" not "TSLA"

---

### Phase 4: Replay with Skill

Same vague prompt:
> "Give me a morning trading brief for my watchlist: TSLA, WDC, SOL."

**With skill loaded, agent:**
1. Reads preferences â†’ knows what to check
2. Reads procedural â†’ knows how to check (skips gotchas)
3. Delivers Run 2 quality output on first try

**Demo value:** Same input, dramatically better output. Self-learning demonstrated.

## Files to Create

1. `playground/finance/finance-morning-brief.md` - task definition

## Why This Task Fits SkillForge

| Criterion | Score | Notes |
|-----------|-------|-------|
| Agent-executable | âœ… | No human-in-the-loop needed |
| E2E verifiable | âœ… | Structure check + alert accuracy |
| **Preference learning** | âœ… | User requirements (what to check) encoded from refinement |
| **Procedural learning** | âœ… | API gotchas (how to check) encoded from errors |
| Underwhelm â†’ Refine â†’ Success | âœ… | Clear before/after demo of learning |
| Multi-source synthesis | âœ… | 8+ data sources requiring coordination |

**Key demo insight:** The vague initial prompt ensures Run 1 is underwhelming. The user refinement teaches the skill what they actually want. Run 3 (with skill) shows the agent "remembers" those preferences.

## Risks

1. **API reliability**: Free APIs may have rate limits or change
2. **Data freshness**: Markets are closed on weekends
3. **Crypto volatility**: Solana price can move significantly during task
4. **Congressional data**: Updates are delayed (45 days for congress)
5. **FRED API quirks**: Series IDs are non-obvious, different update frequencies
6. **Correlation calculation**: Timestamp alignment between 24/7 crypto and market-hours stocks
7. **Whale wallet classification**: Distinguishing exchange wallets from actual whales
8. **Social sentiment noise**: Ticker symbol vs company name confusion ($TSLA vs "Tesla")

## Expected Gotchas (Skill-Encodable)

These are the errors we expect on Run 1 that should be avoided on Run 2:

| Area | Expected Error | Skill Encoding |
|------|----------------|----------------|
| FRED API | Wrong series ID (e.g., "VIX" instead of "VIXCLS") | Cheatsheet of correct series IDs |
| FRED API | Data not updated (different series update at different times) | Note: VIX updates daily, Fed funds weekly |
| RSI Calculation | Using wrong period or price type | "Always use 14-period RSI on adjusted close" |
| Correlation | Misaligned timestamps causing NaN | "Resample crypto to daily close at 4pm ET before correlating with stocks" |
| Social Sentiment | Searching "TSLA" returns unrelated results | "Use '$TSLA' OR 'Tesla stock' for Reddit/Twitter" |
| Social Sentiment | Can't distinguish bullish from sarcastic | "Look for r/wallstreetbets vs r/investing for different sentiment baselines" |
| Whale Wallets | Including exchange hot wallets as "whales" | "Exclude addresses: [known Binance, Coinbase, Kraken SOL wallets]" |
| Whale Wallets | Solscan API rate limiting | "Use Solana FM as fallback, different endpoint format" |
| Support/Resistance | Arbitrary level selection | "Use recent swing highs/lows within 30 days" |
| DXY | Using wrong FRED series | "DTWEXBGS is broad dollar index, not DTWEXM" |

## Next Steps

1. Create `playground/finance/` directory
2. Write `finance-morning-brief.md` with **vague prompt only**
3. **Demo Phase 1:** Run task â†’ get underwhelming output
4. **Demo Phase 2:** Refine in chat â†’ get complete output (note gotchas encountered)
5. **Demo Phase 3:** Codify skill (preferences + procedural)
6. **Demo Phase 4:** New session, same vague prompt, skill loaded â†’ complete output on first try
7. Record demo / write case study
